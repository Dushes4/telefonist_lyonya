# База данных (музыкальный бот для дискорд)

### 1. Список сущностей

- **Пользователь**:
- [ ] id пользователя
- [ ] id cервера
- [ ] кол-во добавленных пользователем треков (для рейтинга)
- **Сервер**:
- [ ] id сервера 
- [ ] id роли сервера, за которую будет выдаваться роль модератора
- [ ] id голосового канала сервера, в который будет заходить бот
- **Очередь**:
- [ ] id сервера
- [ ] ссылка на текущий трек (в зависимости от типа добавления она будет вести либо на сторонний сайт, либо в память сервера)
- [ ] время воспроизведения текущего трека (в секундах)
- [ ] плейлист (список ссылок на песни в очереди)
- **История**:
- [ ] ссылка на трек, добавленный пользователем в плейлист-очередь (появляется здесь независимо от воспроизведения трека, сразу после добавления его в очередь, поэтому связи между сущностью очереди и истории нет)
- [ ] id сервера, где был добавлен трек
- [ ] id пользователя, добавившего трек
- [ ] время добавления

### 2. Список связей
- [ ] Связь пользователя и сервера - многие ко многим. Как один пользователь может быть на нескольких серверах, так и на каждом сервере несколько пользователей.
- [ ] Связь сервера с очередью - один к одному. Каждый сервер имеет одну очередь.
- [ ] Связь пользователя и истории - один ко многим. Записей в истории об одном и том же пользователе может быть много.
- [ ] Связь сервера с историей - многие ко многим. История содержит данные о разных серверах, но и записей о каждом из них может быть много.


(авторизация в интерфейсе происходит через discord-аккаунт, поэтому хранить логины и пароли пользователей в нашем случае не нужно)

### 3. ER диаграмма
Мы не очень поняли, в чем ошибка, сделали два варианта. Даталогическую модель переделаем под нужный.
Версия 1
![ER](https://media.discordapp.net/attachments/755814596383735848/913689071648374794/2.png?width=956&height=553)
Версия 2
![ER](https://sun9-67.userapi.com/impg/jMvuVKyu6yS3jkrz1sIE95GmjRm0X5IlaKdAeg/BuDN0JHkhps.jpg?size=1422x911&quality=96&sign=7fdf51d56c18ee6ffb5b6d94c37a34bd&type=album)
### 4. Даталогическая модель
![data](https://media.discordapp.net/attachments/755814596383735848/911201341668466738/1.png)
