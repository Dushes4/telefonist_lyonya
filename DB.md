# База данных (музыкальный бот для дискорд)

### 1. Список сущностей

- **Пользователь**:
- [ ] id пользователя
- [ ] id cервера
- [ ] кол-во добавленных пользователем треков (для рейтинга)
- **Сервер**:
- [ ] id сервера 
- [ ] id роли сервера, за которую будет выдаваться роль модератора
- [ ] id голосового канала сервера, в который будет заходить бот
- **Очередь**:
- [ ] id сервера
- [ ] ссылка на текущий трек (в зависимости от типа добавления она будет вести либо на сторонний сайт, либо в память сервера)
- [ ] время воспроизведения текущего трека (в секундах)
- [ ] плейлист (список ссылок на песни в очереди)
- **История**:
- [ ] ссылка на трек, добавленный пользователем в плейлист-очередь (появляется здесь независимо от воспроизведения трека, сразу после добавления его в очередь, поэтому связи между сущностью очереди и истории нет)
- [ ] id сервера, где был добавлен трек
- [ ] id пользователя, добавившего трек
- [ ] время добавления

### 2. Список связей
- [ ] Связь пользователя и сервера - многие ко многим. Как один пользователь может быть на нескольких серверах, так и на каждом сервере несколько пользователей.
- [ ] Связь сервера с плеером - один к одному. Каждый сервер имеет свой плеер.
- [ ] Связь плеера и плейлиста - один ко многим. Плейлист содержит много треков для каждого плеера.


(авторизация в интерфейсе происходит через discord-аккаунт, поэтому хранить логины и пароли пользователей в нашем случае не нужно)

### 3. ER диаграмма
Мы организовали очередь так, что запись о каждом треке в плейлисте содержит еще и id следующего трека, который мы будет смотреть, когда доиграем текущий.

![ER](https://media.discordapp.net/attachments/755814596383735848/913706971327238144/2_2.png?width=981&height=553)

### 4. Даталогическая модель
![data](https://media.discordapp.net/attachments/755814596383735848/913706971541159936/ed3154392ff011d8.png?width=1217&height=488)
