# База данных (музыкальный бот для дискорд)

### 1. Список сущностей

- **Пользователь**:
- [ ] id пользователя
- [ ] id cервера
- [ ] кол-во добавленных пользователем треков (для рейтинга)
- **Сервер**:
- [ ] id сервера 
- [ ] id роли сервера, за которую будет выдаваться роль модератора
- [ ] id голосового канала сервера, в который будет заходить бот
- **Плеер**:
- [ ] id сервера
- [ ] статус воспроизведения текущего трека (играет/не играет)
- [ ] время воспроизведения текущего трека (в секундах)
- [ ] id играющего из плейлиста трека (список ссылок на песни в очереди)
- **Плейлист**:
- [ ] id трека
- [ ] id трека, кототрый будет играть после данного (нули, если следующий трек не добавлен)
- [ ] ссылка на трек, добавленный пользователем в плейлист-очередь
- [ ] id сервера, где был добавлен трек
- [ ] id пользователя, добавившего трек
- [ ] время добавления

### 2. Список связей
- [ ] Связь пользователя и сервера - многие ко многим. Как один пользователь может быть на нескольких серверах, так и на каждом сервере несколько пользователей.
- [ ] Связь сервера с плеером - один к одному. Каждый сервер имеет свой плеер.
- [ ] Связь плеера и плейлиста - один ко многим. Плейлист содержит много треков для каждого плеера.


(авторизация в интерфейсе происходит через discord-аккаунт, поэтому хранить логины и пароли пользователей в нашем случае не нужно)

### 3. ER диаграмма
Мы избавились от массива и организовали очередь так, что запись о каждом треке в плейлисте содержит еще и id следующего трека, который мы будет смотреть, когда доиграет текущий.

![ER](https://media.discordapp.net/attachments/755814596383735848/913706971327238144/2_2.png?width=981&height=553)

### 4. Даталогическая модель
![data](https://media.discordapp.net/attachments/755814596383735848/913706971541159936/ed3154392ff011d8.png?width=1217&height=488)
